#### Database 설계 및 SQL 작성

- **Database 설계** 중요한가?
  - 개발자라면 당연히 중요!
  - DB에 굉장히 많은 서버들이 물림
  - DB에 장애가 발생하면 굉장히 많은 `side effect`가 발생!
  - 효율적으로 Database를 관리하기 위해서 

##### 파급효과 & 간결함 

- 파급효과
  - 시스템 구축에는 수많은 과정이 동반된다
  - 초반에 설계할 때 중요!! column 하나만 추가해도 엄청난 효과를 일으킬 가능성!
- 간결함
  - 데이터 모델은 구축할 시스템의 요구사항과 한계를 가장 명확하게 표현하는 도구
  - 데이터 모델을 통해 많은 관련자들이 동일하게 이해하고 작업을 진행, 즉 **설계도면**

##### ERD(Entity Relationship Diagram)

- ERD를 통해서 협업하는 동료들과 프로젝트의 스펙을 커뮤니케이션 오류없이 이해할 수 있으며, 프로젝트의 스펙을 정의

##### Index

- 인덱스란 추가적인 쓰기 작업과 저장 공간을 활용하여 데이터베이스 테이블의 검색 속도를 향상기키기 위한 자료구조 
- type: ALL만 회피!

```sql
EXPLAIN
SELECT * FROM ~~
```



#### MySQL/MariaDB data processing

##### 실무 프로젝트시 데이터 이행

- 프로젝트 오픈시 실제 데이터를 운영DB에 반영하는 작업
- 대량데이터의 경우 오픈 후에는 증분(신규/수정/삭제)데이터만 반영(스케줄 또는 API연계 등)



##### 데이터 적재 시점

- 서버 Down 타임에 적재(운영서버가 다른 DB서버로 교체 불가인 경우)
- 사전 적재(신규서버 도입인 경우 미리 적재가 가능)
- 서비스 오픈 후 적재(내부오픈 등으로 외부 오픈일이 따로 있는 경우 운영자가 따로 정해진 시간에 적재)



##### 적재 방법 (상황에 따라 여러가지)

- DB백업본 restore(특정시점 이전까지의 데이터 dump)사용하여 데이터 이관 후 오픈 시점까지의 증분 데이터는 소급반영
- 텍스트 데이터 이관(다양한 형식의 텍스트 파일 CSV, TXT, JSON...)
- DB TO DB 마이그레이션(DB 또는 솔루션 사용)
- 정제된 텍스트 데이터를 DB에 직접 인서트
- 정제되지 않은 데이터를 입력이 가능한 형태로 가공 및 인서트
- 데이터 제공자 측에서 제공하는 Restful API를 호출하여 데이터 인서트(외부망으로 연계가 가능해야 하며 주로 증분 데이터에만 사용)



##### MySQL과 MariaDB를 사용하는 이유

- DB시장에서 사용할 수 있는 최초의 오픈 DB중 하나이며 가장 널리 사용되고 있는 관계형 데이터베이스 관리 시스템
- 오픈소스 라이선스를 따르기는 하지만 상업적 이용시 상업용 라이선스를 구입해야 함
- MySQL의 창시자인 몬티 와이드니어가 만든 프로젝트가 MariaDB 
- 두 DB의 성능 차이는 크게 없다
- MariaDB와 MySQL의 호환성은 매우 높다
- AWS의 Amazon Aurora와 교체사용하기 용이하다
- 상용 버전이 별도로 없다는 것이 MariaDB의 장점
- 상대적으로 많은 레퍼런스들이 있다는 것이 MySQL의 장점